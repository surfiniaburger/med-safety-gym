# v0.1.62 Baseline Snapshot: Clinical Simulation Flow

Date: 2026-02-09
Version: v0.1.62 (Pre-Agentic Vision)

## Current Architecture
The "Intervention Sandbox" currently follows a static generation model:
1. **Trigger**: Evaluation pauses at a high-risk step.
2. **Action**: `App.tsx` calls `handleIntervention()`.
3. **Generation**: `services/gemini.ts:bringToLife()` generates a one-shot HTML simulation based on JSON metadata.
4. **Display**: `LivePreview.tsx` renders this HTML in an `iframe`.
5. **Resolution**: User interacts with the simulation and clicks "Resolve" to return to the Gauntlet.

## Existing Components
- **[App.tsx](file:///Users/surfiniaburger/Desktop/med-safety-gym/bring-any-eval-to-life/App.tsx)**: Orchestrates view state (`selection` -> `gauntlet` -> `simulator`).
- **[LivePreview.tsx](file:///Users/surfiniaburger/Desktop/med-safety-gym/bring-any-eval-to-life/components/LivePreview.tsx)**: A container for the simulation iframe.
- **[gemini.ts](file:///Users/surfiniaburger/Desktop/med-safety-gym/bring-any-eval-to-life/services/gemini.ts)**: Stateless prompt to HTML generator.

## Visual Baseline
The current simulations are generated from text descriptions only. There is no feedback loop where the model "sees" the UI it created to refine it.

## Implementation Goal (Agentic Vision)
We will introduce a **Vision Feedback Loop**:
1. User provides critique.
2. System captures a **Screenshot** of the active simulation.
3. **Gemini 3 Flash** uses Agentic Vision to analyze the screenshot vs. the critique.
4. Model generates a **Refined HTML** patch or full replacement.
